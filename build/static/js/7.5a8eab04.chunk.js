(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{159:function(e,t,n){"use strict";n.r(t);var s=n(0),o=n(4),a=n(75);const r="192.168.0.199";var c={serverUrl:r+":3000/",systemAdmin:{name:"\u540c\u82b1",role:"\u7cfb\u7edf\u603b\u7ba1",urlDebug:r+":3001"},phonePatter:"/^(0[0-9]{2,3}\\-)?([2-9]([0-9]|\\-){6,8})+(\\-[0-9]{1,4})?$|^(13[0-9]|15[0|3|6|7|8|9]|18[8|9])\\-*(\\d|\\-){8}$/",form:{label:{sm:3,md:2},input:{sm:9,md:9},submit:{xs:void 0,sm:{offset:3,size:3},md:{offset:2,size:3},lg:void 0}},appIcon:"http://101.200.46.56/imgs/Bear-icon.png",appItemIcon:"http://101.200.46.56/imgs/Bear-icon.png"};class i extends s.Component{constructor(){super(...arguments),this.showLogs=(()=>{o.nav.push(s.createElement(o.Page,{header:"Logs"},s.createElement("div",null,"NODE_ENV: ","production"),o.nav.logs.map((e,t)=>s.createElement("div",{key:t,className:"px-3 py-1"},e))))})}render(){let e=s.createElement("button",{className:"btn btn-success btn-sm",onClick:this.showLogs},"log");return s.createElement(o.Page,{header:"\u5173\u4e8e\u540c\u82b1",right:e},s.createElement("div",{className:"m-3"},"\u540c\u82b1"))}}var l=function(e,t,n,s){return new(n||(n=Promise))(function(o,a){function r(e){try{i(s.next(e))}catch(t){a(t)}}function c(e){try{i(s.throw(e))}catch(t){a(t)}}function i(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,c)}i((s=s.apply(e,t||[])).next())})};var m=new class extends o.CenterApi{changePassword(e){return l(this,void 0,void 0,function*(){return yield this.post("tie/reset-password",e)})}}("tv/",void 0),d=function(e,t,n,s){return new(n||(n=Promise))(function(o,a){function r(e){try{i(s.next(e))}catch(t){a(t)}}function c(e){try{i(s.throw(e))}catch(t){a(t)}}function i(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,c)}i((s=s.apply(e,t||[])).next())})};const u=[{name:"orgPassword",type:"string",required:!0},{name:"newPassword",type:"string",required:!0},{name:"newPassword1",type:"string",required:!0},{name:"submit",type:"submit"}],p={items:{orgPassword:{widget:"password",label:"\u539f\u5bc6\u7801",maxLength:60,placeholder:"\u8f93\u5165\u539f\u6765\u7684\u5bc6\u7801"},newPassword:{widget:"password",label:"\u65b0\u5bc6\u7801",maxLength:60,placeholder:"\u8f93\u5165\u65b0\u8bbe\u7684\u5bc6\u7801"},newPassword1:{widget:"password",label:"\u786e\u8ba4\u5bc6\u7801",maxLength:60,placeholder:"\u518d\u6b21\u8f93\u5165\u65b0\u8bbe\u5bc6\u7801"},submit:{widget:"button",className:"btn btn-primary",label:"\u63d0\u4ea4"}}};class w extends s.Component{constructor(){super(...arguments),this.onSubmit=((e,t)=>d(this,void 0,void 0,function*(){let e=t.form.data,{orgPassword:n,newPassword:a,newPassword1:r}=e;return a!==r?(t.setValue("newPassword",""),t.setValue("newPassword1",""),"\u65b0\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):!1===(yield m.changePassword({orgPassword:n,newPassword:a}))?(t.setValue("orgPassword",""),"\u539f\u5bc6\u7801\u9519\u8bef"):void o.nav.replace(s.createElement(o.Page,{header:"\u4fee\u6539\u5bc6\u7801",back:"close"},s.createElement("div",{className:"m-3  text-success"},"\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01")))}))}render(){return s.createElement(o.Page,{header:"\u4fee\u6539\u5bc6\u7801"},s.createElement(o.Form,{className:"m-3",schema:u,uiSchema:p,requiredFlag:!1,onButtonClick:this.onSubmit}))}}t.default=class extends s.Component{constructor(){super(...arguments),this.about=(()=>o.nav.push(s.createElement(i,null))),this.changePassword=(()=>{o.nav.push(s.createElement(w,null))})}exit(){confirm("\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u5386\u53f2\u6570\u636e\uff0c\u4e0b\u6b21\u767b\u5f55\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u672c\u8d26\u53f7")&&o.nav.logout()}render(){const{user:e}=o.nav;let t=["",{type:"component",component:s.createElement(a.Media,{icon:c.appIcon,main:e.name,discription:String(e.id)})},"",{type:"component",component:s.createElement(a.IconText,{iconClass:"text-info",icon:"envelope",text:"\u4fee\u6539\u5bc6\u7801"}),onClick:this.changePassword},"",{type:"component",component:s.createElement(a.IconText,{iconClass:"text-info",icon:"envelope",text:"\u5173\u4e8e\u540c\u82b1"}),onClick:this.about},"","",{type:"component",bk:"",component:s.createElement("button",{className:"btn btn-danger w-100",onClick:this.exit},s.createElement(a.FA,{name:"sign-out",size:"lg"})," \u9000\u51fa\u767b\u5f55")}];return s.createElement(a.PropGrid,{rows:t,values:{}})}}}}]);
//# sourceMappingURL=7.5a8eab04.chunk.js.map