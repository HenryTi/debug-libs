{"version":3,"sources":["consts.ts","face/me/about.tsx","face/center.ts","face/me/changePassword.tsx","face/me/tab.tsx"],"names":["ip","src_consts","serverUrl","systemAdmin","name","role","urlDebug","phonePatter","form","label","sm","md","input","submit","xs","undefined","offset","size","lg","appIcon","appItemIcon","about_About","react","[object Object]","className","face_center","tonva_tools","param","this","post","schema","type","required","uiSchema","items","orgPassword","widget","maxLength","placeholder","newPassword","newPassword1","changePassword_ChangePasswordPage","onSubmit","context","changePassword_awaiter","values","data","setValue","changePassword","replace","header","back","requiredFlag","onButtonClick","__webpack_exports__","about","right","onClick","showLogs","push","confirm","logout","logs","map","v","i","key","user","rows","component","tonva_react_form","icon","main","discription","String","id","iconClass","text","bk","exit"],"mappings":"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","file":"static/js/7.34a31a9d.chunk.js","sourcesContent":["const ip = \"192.168.0.199\";\r\n\r\nconst consts = {\r\n    \"serverUrl\": ip + \":3000/\",\r\n    \"systemAdmin\": {\r\n        \"name\": \"同花\",\r\n        \"role\": \"系统总管\",\r\n        \"urlDebug\": ip + \":3001\"\r\n    },\r\n    phonePatter: '/^(0[0-9]{2,3}\\\\-)?([2-9]([0-9]|\\\\-){6,8})+(\\\\-[0-9]{1,4})?$|^(13[0-9]|15[0|3|6|7|8|9]|18[8|9])\\\\-*(\\\\d|\\\\-){8}$/',\r\n\r\n    form: {\r\n        label: {sm:3, md:2},\r\n        input: {sm: 9, md: 9},\r\n        submit: {\r\n            xs: undefined,\r\n            sm: {offset: 3, size: 3},\r\n            md: {offset: 2, size: 3},\r\n            lg: undefined,\r\n        }\r\n    },\r\n\r\n    appIcon: 'http://101.200.46.56/imgs/Bear-icon.png',\r\n    appItemIcon: 'http://101.200.46.56/imgs/Bear-icon.png',\r\n};\r\n\r\nexport default consts;\r\n","import * as React from 'react';\r\n\r\nexport class About extends React.Component {\r\n    render() {\r\n        return <div className='m-3'>\r\n            同花\r\n        </div>;\r\n    }\r\n}\r\n","import {CenterApi, User} from 'tonva-tools';\r\n\r\nclass Center extends CenterApi {\r\n    async changePassword(param: {orgPassword:string, newPassword:string}) {\r\n        return await this.post('tie/reset-password', param);\r\n    }\r\n}\r\n\r\nconst center = new Center('tv/', undefined);\r\nexport default center;\r\n","import * as React from 'react';\r\nimport {Page, nav, Form, Context, Schema, UiSchema, UiPasswordItem} from 'tonva-tools';\r\nimport center from 'face/center';\r\n\r\nconst schema: Schema = [\r\n    {name:'orgPassword', type: 'string', required: true},\r\n    {name:'newPassword', type: 'string', required: true},\r\n    {name:'newPassword1', type: 'string', required: true},\r\n    {name: 'submit', type: 'submit'},\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n    items: {\r\n        orgPassword: {\r\n            widget: 'password',\r\n            label: '原密码', \r\n            maxLength: 60,\r\n            placeholder: '输入原来的密码'\r\n        } as UiPasswordItem,\r\n        newPassword: {\r\n            widget: 'password',\r\n            label: '新密码', \r\n            maxLength: 60,\r\n            placeholder: '输入新设的密码'\r\n        } as UiPasswordItem,\r\n        newPassword1: {\r\n            widget: 'password',\r\n            label: '确认密码', \r\n            maxLength: 60, \r\n            placeholder: '再次输入新设密码'\r\n        } as UiPasswordItem,\r\n        submit: {\r\n            widget: 'button',\r\n            className: 'btn btn-primary', \r\n            label: '提交'\r\n        }\r\n    }\r\n}\r\n\r\nexport default class ChangePasswordPage extends React.Component {\r\n    private onSubmit = async (name:string, context:Context):Promise<string> => {\r\n        let values:any = context.form.data;\r\n        let {orgPassword, newPassword, newPassword1} = values;\r\n        if (newPassword !== newPassword1) {\r\n            context.setValue('newPassword', '');\r\n            context.setValue('newPassword1', '');\r\n            return '新密码错误，请重新输入';\r\n        }\r\n        let ret = await center.changePassword({orgPassword: orgPassword, newPassword:newPassword});\r\n        if (ret === false) {\r\n            context.setValue('orgPassword', '');\r\n            return '原密码错误';\r\n        }\r\n        nav.replace(<Page header=\"修改密码\" back=\"close\">\r\n            <div className=\"m-3  text-success\">\r\n                密码修改成功！\r\n            </div>\r\n        </Page>);\r\n        return;\r\n    }\r\n    render() {\r\n        return <Page header=\"修改密码\">\r\n            <Form className=\"m-3\" \r\n                schema={schema} uiSchema={uiSchema}\r\n                requiredFlag={false}\r\n                onButtonClick={this.onSubmit} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\n","import * as React from 'react';\r\n//import {Media, PropGrid, Prop, FA, IconText, TonvaForm, FormRow, SubmitResult, Fields} from 'tonva-react-form';\r\nimport {nav, User, Page} from 'tonva-tools';\r\nimport {Prop, Media, IconText, FA, PropGrid} from 'tonva-react-form';\r\n//import {store} from 'store';\r\nimport consts from 'consts';\r\n//import mainApi from 'mainApi';\r\nimport {About} from './about';\r\nimport ChangePasswordPage from './changePassword';\r\n\r\nclass Me extends React.Component {\r\n    private exit() {\r\n        if (confirm('退出当前账号不会删除任何历史数据，下次登录依然可以使用本账号')) {\r\n            nav.logout();\r\n        }\r\n    }\r\n    private about = () => {\r\n        let right = <button className='btn btn-success btn-sm' onClick={this.showLogs}>log</button>;\r\n        nav.push(<Page header=\"关于同花\" right={right}>\r\n            <About />\r\n        </Page>);\r\n    }\r\n    \r\n    private showLogs() {\r\n        nav.push(<Page header=\"Logs\">\r\n            {nav.logs.map((v,i) => {\r\n                return <div key={i} className=\"px-3 py-1\">{v}</div>;\r\n            })}\r\n        </Page>);\r\n    }\r\n    \r\n    private changePassword = () => {\r\n        nav.push(<ChangePasswordPage />);\r\n    }\r\n    render() {\r\n        const {user} = nav;\r\n        let rows:Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component', \r\n                component: <Media icon={consts.appIcon} main={user.name} discription={String(user.id)} />\r\n            },\r\n            '',\r\n            {\r\n                type: 'component', \r\n                component: <IconText iconClass=\"text-info\" icon=\"envelope\" text=\"修改密码\" />,\r\n                onClick: this.changePassword\r\n            },\r\n            '',\r\n            {\r\n                type: 'component', \r\n                component: <IconText iconClass=\"text-info\" icon=\"envelope\" text=\"关于同花\" />,\r\n                onClick: this.about\r\n            },\r\n            '',\r\n            '',\r\n            {\r\n                type: 'component', \r\n                bk: '', \r\n                component: <button className=\"btn btn-danger w-100\" onClick={this.exit}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n                </button>\r\n            },\r\n        ];\r\n        return <PropGrid rows={rows} values={{}} />;\r\n    }\r\n}\r\n\r\nexport default Me;\r\n"],"sourceRoot":""}